---
title: HyperClaw API
description: Checkout and account API for HyperClaw inference
---

## Base URLs

| Surface | URL |
|---------|-----|
| Inference (OpenAI-compatible) | `https://api.hyperclaw.app/v1` |
| Account + billing API | `https://api.hyperclaw.app/api` |
| Product UI | `https://hyperclaw.app` |

<Note>
In production, routes are served under `/api` (for example `/api/stripe/{plan_id}` and `/api/x402/{plan_id}`).
</Note>

## Auth Modes

- Inference endpoints (`/v1/*`): `Authorization: Bearer sk-...`
- Account endpoints (`/api/*`): `Authorization: Bearer <jwt>`
- x402 checkout (`/api/x402/{plan_id}`): JWT is optional

## Plans

List plans:

```bash
curl https://api.hyperclaw.app/api/plans
```

Get current plan (JWT required):

```bash
curl https://api.hyperclaw.app/api/plans/current \
  -H "Authorization: Bearer <jwt>"
```

## Stripe Checkout (Credit Card)

Endpoint: `POST /api/stripe/{plan_id}`

- Requires JWT auth
- Returns a Stripe-hosted `checkout_url`
- Webhook (`/api/stripe/hook`) activates subscription and applies team limits

```bash
curl -X POST https://api.hyperclaw.app/api/stripe/1aiu \
  -H "Authorization: Bearer <jwt>" \
  -H "Content-Type: application/json" \
  -d '{
    "success_url": "https://hyperclaw.app/dashboard/plans?session_id={CHECKOUT_SESSION_ID}",
    "cancel_url": "https://hyperclaw.app/dashboard/plans?cancelled=true"
  }'
```

## x402 Checkout (USDC)

Endpoint: `POST /api/x402/{plan_id}`

- Uses x402 HTTP 402 flow
- Middleware validates payment and accepts amounts `>=` plan minimum
- Route calculates duration from the signed transfer amount (`authorization.value`)

### Flow

1. POST request without payment headers
2. Receive HTTP 402 with payment requirements
3. Sign and retry with payment payload (`X-PAYMENT`)
4. Receive API key + expiry + limits

```bash
# Step 1
curl -X POST https://api.hyperclaw.app/api/x402/1aiu

# Step 2: retry with x402 payment payload
curl -X POST https://api.hyperclaw.app/api/x402/1aiu \
  -H "X-PAYMENT: <signed-payment-payload>"
```

### Duration Calculation

Duration scales with paid amount:

- `duration_days = (amount_paid / plan_price) * X402_PLAN_DURATION_DAYS`
- Includes sub-day precision (seconds)

So exact plan price gives base duration, and higher amounts increase duration proportionally.

### JWT Optional Behavior

- With JWT: creates account-linked subscription/payment records and updates team limits
- Without JWT: returns standalone API key (anonymous x402 purchase)

### Response Shape

```json
{
  "ok": true,
  "key": "sk-...",
  "plan_id": "1aiu",
  "amount_paid": "35.000000",
  "duration_days": 30.0,
  "expires_at": "2026-03-15T12:00:00+00:00",
  "tpm_limit": 600000,
  "rpm_limit": 3000
}
```
