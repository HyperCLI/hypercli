# Netlify Configuration for HyperCLI Monorepo
# Build commands are managed separately in Netlify UI

# Next.js Plugin for optimal performance and Edge Functions support
[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  NODE_VERSION = "20"

  # Disable debug in production
  NEXT_PUBLIC_AUTH_DEBUG = "false"

  # Cookie domain for cross-subdomain authentication
  NEXT_PUBLIC_COOKIE_DOMAIN = ".hypercli.dev"
  NEXT_PUBLIC_COOKIE_VALIDITY = "15"

  # Site URLs
  NEXT_PUBLIC_MAIN_SITE_URL = "https://hypercli.dev"
  NEXT_PUBLIC_CONSOLE_URL = "https://console.hypercli.dev"
  NEXT_PUBLIC_CHAT_URL = "https://chat.hypercli.dev"

  # Instances API - always use production for full instance catalog
  NEXT_PUBLIC_INSTANCES_API_URL = "https://api.compute3.ai/instances"

  # WebSocket URL for job logs
  NEXT_PUBLIC_WS_URL = "wss://api.compute3.ai/orchestra/ws"

  # LLM API URL for chat completions
  NEXT_PUBLIC_LLM_API_URL = "https://api.compute3.ai/v1"

  # Default model for chat
  NEXT_PUBLIC_DEFAULT_MODEL = "minimax-m2"

  # Auth/API Backend
  NEXT_PUBLIC_AUTH_BACKEND = "https://api.compute3.ai/api"
  NEXT_PUBLIC_API_BASE = "https://api.compute3.ai/api"

  # Turnkey Configuration
  NEXT_PUBLIC_ORGANIZATION_ID = "20691c9c-a40b-44cb-8ace-aac3965f25c0"
  NEXT_PUBLIC_AUTH_PROXY_CONFIG_ID = "fb58b5e9-0e45-4954-9672-dadd7a7f166a"
  NEXT_PUBLIC_BASE_URL = "https://api.turnkey.com"
  NEXT_PUBLIC_AUTH_PROXY_URL = "https://authproxy.turnkey.com"

  # Google OAuth
  NEXT_PUBLIC_GOOGLE_OAUTH_CLIENT_ID = "966038109624-uj8vveij878m0uohnq99g8b29jcqi2a0.apps.googleusercontent.com"

  # WalletConnect (for RainbowKit)
  # NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID = "your-walletconnect-project-id"

  # Payment Configuration - LIVE
  NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY = "pk_live_51SSWmjQcZcim9HgToGFTGl2i2ujksoZxVxl6Hnsy9Py2cxo9IWZY0852aiFcKEe2rrcozuYkf1UUhDKJuoyRCeS600gouzMj9F"

# Security headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "camera=(), microphone=(), geolocation=()"
